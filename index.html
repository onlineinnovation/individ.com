<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Offert - OnlineInnovation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; background: #f9fafb; color: #111827; margin: 0; padding: 0; }
    .container { max-width: 850px; margin: 40px auto; background: #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-radius: 12px; overflow: hidden; }
    header { background: #0072CE; color: #fff; text-align: center; padding: 40px 20px; }
    header img { height: 70px; margin-bottom: 10px; }
    header h1 { margin: 10px 0 5px; font-size: 28px; }
    header p { margin: 3px 0; }
    section { padding: 30px 40px; }
    h2 { color: #0072CE; font-size: 18px; margin-top: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 14px; }
    th { background: #0072CE; color: white; text-align: left; padding: 8px; }
    td { border: 1px solid #ddd; padding: 8px; }
    .signature-section { border-top: 1px solid #e2e8f0; background: #f3f4f6; }
    canvas { border-radius: 0.75rem; cursor: crosshair; border: 1px dashed #94a3b8; background: #fff; }
    .confirm { display: none; margin-top: 15px; color: green; font-weight: 600; }
  </style>
</head>
<body>
  <div class="container" id="offert">
    <header>
      <img src="images/onlineinnovation-logo.png" alt="OnlineInnovation logotyp">
      <h1>Offert</h1>
      <p>Digital Marknadsf√∂ring f√∂r Individ.com</p>
      <p>Kompaniet AB</p>
      <p>Utf√§rdad: 2025-11-07 | Giltig till: 2025-11-30</p>
      <p>Fr√•n: OnlineInnovation.se</p>
    </header>

    <section>
      <h2>1. Kontaktperson</h2>
      <p><b>William Rosell</b><br>Certifierad Google Ads-specialist | Digital strateg<br>
        üìû +46 727 08 24 27<br>üìß william@onlineinnovation.se<br>üåê www.onlineinnovation.se</p>

      <h2>2. Uppdraget</h2>
      <p><b>M√•l:</b> Att etablera och accelerera Kompaniet AB:s f√∂rs√§ljning av exklusivt mode via Shopify genom strategiskt optimerad annonsering p√• Google (Search och Shopping).</p>
      <p><b>Syfte:</b> Att positionera Kompaniet AB som ett ledande high-end-varum√§rke inom sin kategori och driva l√∂nsam trafik med h√∂g k√∂pkraft.</p>

      <h2>3. Strategi & Genomf√∂randeplan</h2>
      <p><b>Steg 1 ‚Äî Google Ads & L√∂pande Optimering</b><br>
        ‚Ä¢ Uppbyggnad av Google Search- och Shopping-kampanjer<br>
        ‚Ä¢ Optimering av annonser f√∂r premium-segment (tonalitet, bildval, CTA)<br>
        ‚Ä¢ Avancerad s√∂kords- och m√•lgruppsanalys<br>
        ‚Ä¢ L√∂pande justering av budstrategier, budget och placeringar<br>
        ‚Ä¢ Uteslutning av icke-konverterande trafik f√∂r optimal ROI<br>
        ‚Ä¢ Kontinuerlig A/B-testning och m√•nadsrapporter<br><br>
        <b>Steg 2 ‚Äî Sp√•rning & Analys (GA4, GTM, GMC)</b><br>
        ‚Ä¢ Implementering av konverteringsm√•l och integrationer<br>
        ‚Ä¢ Koppling till Google Merchant Center<br>
        ‚Ä¢ Integration med Google Search Console<br>
        ‚Ä¢ Datadriven analys f√∂r kontinuerlig f√∂rb√§ttring.
      </p>

      <h2>4. Planering & Kostnad</h2>
      <table>
        <thead>
          <tr>
            <th>Tj√§nst</th>
            <th>Specifikation</th>
            <th>Pris (exkl. moms)</th>
            <th>Leveransdatum</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Standardupps√§ttning GA4 / GTM / GMC</td>
            <td>Enligt beskrivning ovan</td>
            <td><s>9 950 kr</s> <b style="color:green">Ing√•r utan kostnad</b></td>
            <td>2025-11-07</td>
          </tr>
          <tr>
            <td>Google Ads & L√∂pande Optimering</td>
            <td>M√•nadsvis, min. 3 m√•nader</td>
            <td>11 900 kr / m√•nad</td>
            <td>Start 2025-11-07</td>
          </tr>
        </tbody>
      </table>

      <h2>5. Avtalsvillkor</h2>
      <ul>
        <li>Fakturering: M√•nadsvis i utf√∂randem√•naden</li>
        <li>Betalningsvillkor: 30 dagar netto</li>
        <li>F√∂rsenad betalning: P√•minnelseavgift + 16 % dr√∂jsm√•lsr√§nta</li>
        <li>Upps√§gning: Efter bindningstid, 1 m√•nad upps√§gningstid</li>
        <li>Offert giltig till: 2025-11-30</li>
      </ul>
    </section>

    <section class="signature-section px-6 py-12 sm:px-12" id="signera">
      <div class="max-w-3xl">
        <div class="flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.35em] text-slate-500">
          <span class="rounded-full bg-slate-200 px-3 py-1" data-progress="name">1. Namn</span>
          <span class="rounded-full bg-slate-200 px-3 py-1" data-progress="date">2. Datum</span>
          <span class="rounded-full bg-slate-200 px-3 py-1" data-progress="sign">3. Signatur</span>
        </div>
        <h2 class="mt-6 text-2xl font-semibold text-slate-900">6. Signering</h2>
        <p class="mt-2 text-slate-600">Genom att fylla i dina uppgifter och signera bekr√§ftar du att offerten och dess villkor accepteras. Allm√§nna villkor g√§ller som en del av avtalet.</p>
      </div>

      <div class="mt-8 grid gap-6 md:grid-cols-2">
        <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
          Fullst√§ndigt namn
          <input type="text" id="name" placeholder="Ex. Anna Andersson" class="rounded-xl border border-slate-200 px-4 py-3 text-base shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200" />
        </label>
        <label class="flex flex-col gap-2 text-sm font-medium text-slate-700">
          Datum
          <input type="date" id="date" class="rounded-xl border border-slate-200 px-4 py-3 text-base shadow-sm outline-none transition focus:border-slate-400 focus:ring-2 focus:ring-slate-200" />
        </label>
      </div>

      <div class="mt-8">
        <div class="flex items-center justify-between">
          <p class="text-sm font-semibold uppercase tracking-[0.3em] text-slate-500">Digital signatur</p>
          <button type="button" id="clear-signature" class="text-sm font-semibold text-slate-500 transition hover:text-slate-900">Rensa signatur</button>
        </div>
        <div class="mt-3 rounded-2xl border border-dashed border-slate-300 bg-white p-4 shadow-inner">
          <canvas id="signature-pad" width="600" height="180" class="w-full"></canvas>
          <p class="mt-2 text-xs text-slate-400">Signera med mus eller touch-sk√§rm.</p>
        </div>
      </div>

      <div class="mt-8 flex flex-wrap items-center gap-4">
        <button class="inline-flex items-center justify-center rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-lg transition disabled:cursor-not-allowed disabled:bg-slate-400" id="download" disabled>
          Signera &amp; ladda ner PDF
        </button>
        <button type="button" id="preview" class="inline-flex items-center justify-center rounded-full border border-slate-300 px-6 py-3 text-sm font-semibold text-slate-700 transition hover:border-slate-400">
          F√∂rhandsgranska PDF
        </button>
        <span class="text-sm text-slate-500" id="status-text">Fyll i f√§lten och signera f√∂r att aktivera nedladdning.</span>
      </div>
      <div class="confirm" id="confirm-msg">‚úÖ Tack! Offerten har laddats ner med din signatur.</div>
    </section>
  </div>

  <script>
    const { jsPDF } = window.jspdf;
    const canvas = document.getElementById('signature-pad');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let hasSignature = false;
    const nameInput = document.getElementById('name');
    const dateInput = document.getElementById('date');
    const downloadBtn = document.getElementById('download');
    const previewBtn = document.getElementById('preview');
    const statusText = document.getElementById('status-text');
    const checkpoints = {
      name: document.querySelector('[data-progress="name"]'),
      date: document.querySelector('[data-progress="date"]'),
      sign: document.querySelector('[data-progress="sign"]')
    };

    const setCheckpoint = (key, done) => {
      if (!checkpoints[key]) return;
      checkpoints[key].classList.toggle('bg-green-500', done);
      checkpoints[key].classList.toggle('text-white', done);
      checkpoints[key].classList.toggle('bg-slate-200', !done);
      checkpoints[key].classList.toggle('text-slate-500', !done);
    };

    const updateActions = () => {
      const ready = nameInput.value.trim().length > 1 && dateInput.value && hasSignature;
      downloadBtn.disabled = !ready;
      statusText.textContent = ready ? 'Allt klart! Klicka p√• "Signera & ladda ner".' : 'Fyll i f√§lten och signera f√∂r att aktivera nedladdning.';
      setCheckpoint('name', nameInput.value.trim().length > 1);
      setCheckpoint('date', !!dateInput.value);
      setCheckpoint('sign', hasSignature);
    };

    const getCoords = (event) => {
      const rect = canvas.getBoundingClientRect();
      if (event.touches && event.touches[0]) {
        return {
          x: event.touches[0].clientX - rect.left,
          y: event.touches[0].clientY - rect.top
        };
      }
      return { x: event.offsetX, y: event.offsetY };
    };

    const startDrawing = (event) => {
      drawing = true;
      draw(event);
    };

    const endDrawing = () => {
      drawing = false;
      ctx.beginPath();
      if (!hasSignature) {
        hasSignature = true;
        updateActions();
      }
    };

    canvas.addEventListener('mousedown', startDrawing);
    canvas.addEventListener('mouseup', endDrawing);
    canvas.addEventListener('mouseleave', endDrawing);
    canvas.addEventListener('mousemove', (event) => draw(event));
    canvas.addEventListener('touchstart', (event) => {
      event.preventDefault();
      startDrawing(event);
    });
    canvas.addEventListener('touchend', (event) => {
      event.preventDefault();
      endDrawing();
    });
    canvas.addEventListener('touchmove', (event) => {
      event.preventDefault();
      draw(event);
    });

    function draw(e) {
      if (!drawing) return;
      const { x, y } = getCoords(e);
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#000';
      ctx.lineTo(x, y);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(x, y);
    }

    document.getElementById('clear-signature').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      hasSignature = false;
      updateActions();
    });

    [nameInput, dateInput].forEach((input) => input.addEventListener('input', updateActions));
    updateActions();

    const generatePDF = (save = false) => {
      const pdf = new jsPDF('p', 'pt', 'a4');
      pdf.html(document.getElementById('offert'), {
        callback: function (doc) {
          const imgData = canvas.toDataURL('image/png');
          doc.addImage(imgData, 'PNG', 50, 700, 200, 60);
          if (save) {
            doc.save('Offert_KompanietAB_OnlineInnovation.pdf');
            document.getElementById('confirm-msg').style.display = 'block';
          } else {
            window.open(doc.output('bloburl'), '_blank');
          }
        },
        html2canvas: { scale: 0.7 }
      });
    };

    downloadBtn.addEventListener('click', () => generatePDF(true));
    previewBtn.addEventListener('click', () => generatePDF(false));
  </script>
</body>
</html>
